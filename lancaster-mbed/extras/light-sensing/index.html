<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:image" content="../../../img/logo.png"/>

  
  <meta name="author" content="Doãn Minh Đăng">
  
  <title>MicroBitLightSensor - Microbit Việt Nam</title>
  

  <link rel="shortcut icon" href="../../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/highlight.css">
  <link href="../../../_build/html/_static/alabaster.css" rel="stylesheet">
  <link href="../../../_build/html/_static/basic.css" rel="stylesheet">
  <link href="../../../_build/html/_static/custom.css" rel="stylesheet">
  <link href="../../../_build/html/_static/pygments.css" rel="stylesheet">
  <link href="../../../_build_html/_static/alabaster.css" rel="stylesheet">
  <link href="../../../_build_html/_static/basic.css" rel="stylesheet">
  <link href="../../../_build_html/_static/custom.css" rel="stylesheet">
  <link href="../../../_build_html/_static/pygments.css" rel="stylesheet">
  <link href="../../../lancaster-mbed/resources/bluetooth/style.css" rel="stylesheet">

  <link rel="stylesheet" href="../../../css/custom.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "MicroBitLightSensor";
    var mkdocs_page_input_path = "lancaster-mbed/extras/light-sensing.md";
    var mkdocs_page_url = "/lancaster-mbed/extras/light-sensing/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../js/highlight.pack.js"></script>
  <script src="../../../js/theme.js"></script>
  <script src="../../../js/jquery.cookie-1.4.1.min.js"></script>
  <script src="../../../js/nav.js"></script> 
  <script src="../../../_build/html/searchindex.js"></script>
  <script src="../../../_build/html/_static/doctools.js"></script>
  <script src="../../../_build/html/_static/jquery-3.1.0.js"></script>
  <script src="../../../_build/html/_static/jquery.js"></script>
  <script src="../../../_build/html/_static/searchtools.js"></script>
  <script src="../../../_build/html/_static/translations.js"></script>
  <script src="../../../_build/html/_static/underscore-1.3.1.js"></script>
  <script src="../../../_build/html/_static/underscore.js"></script>
  <script src="../../../_build/html/_static/websupport.js"></script>
  <script src="../../../_build_html/searchindex.js"></script>
  <script src="../../../_build_html/_static/doctools.js"></script>
  <script src="../../../_build_html/_static/jquery-3.1.0.js"></script>
  <script src="../../../_build_html/_static/jquery.js"></script>
  <script src="../../../_build_html/_static/searchtools.js"></script>
  <script src="../../../_build_html/_static/translations.js"></script>
  <script src="../../../_build_html/_static/underscore-1.3.1.js"></script>
  <script src="../../../_build_html/_static/underscore.js"></script>
  <script src="../../../_build_html/_static/websupport.js"></script>
  <script src="../../../lancaster-mbed/resources/bluetooth/functions.js"></script>

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-60470603-6', 'help.microbit.vn');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> Microbit Việt Nam</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li><ul class="subnav">
    <li class="">
        <a class="" href="../../.." id="Trang chủ" style="font-size:95%;font-weight:bold;">Trang chủ</a>
    </li>
    
    <li class="paddingtop20"></li>
</ul>
<li>
          
            <li><ul class="subnav">
    <li class="current">
        <a class="current"  id="Nội dung" style="font-size:95%;font-weight:bold;">Nội dung</a>
    </li>
    
        <li class="current">
            <a style="padding-left:50px;" class="current"  id="micro:bit - Mbed - C/C++" onclick="showChildren('micro:bit - Mbed - C/C++')"> <i class="fa fa-plus-square" style="padding-left:5px;font-size:13px;"></i> micro:bit - Mbed - C/C++</a>
        </li>
        
        <div style="display:none" id="hidden_micro:bit - Mbed - C/C++">
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="Thông tin chung" onclick="showChildren('micro:bit - Mbed - C/C++Thông tin chung')"> <i class="fa fa-plus-square" style="padding-left:5px;font-size:13px;"></i>  Thông tin chung </a>
                <!--  -->
            </li>
            
            <div style="display:none" id="hidden_micro:bit - Mbed - C/C++Thông tin chung">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../" id="Giới thiệu">Giới thiệu </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../concepts/" id="Các khái niệm">Các khái niệm </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../advanced/" id="Nâng cao">Nâng cao </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../online-toolchains/" id="Phát triển trên web">Phát triển trên web </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../offline-toolchains/" id="Phát triển offline">Phát triển offline </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../device/" id="Phần cứng">Phần cứng </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../help/" id="Giúp đỡ">Giúp đỡ </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="uBit" onclick="showChildren('micro:bit - Mbed - C/C++uBit')"> <i class="fa fa-plus-square" style="padding-left:5px;font-size:13px;"></i>  uBit </a>
                <!--  -->
            </li>
            
            <div style="display:none" id="hidden_micro:bit - Mbed - C/C++uBit">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ubit/" id="Overview">Overview </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ubit/i2c/" id="i2c">i2c </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ubit/storage/" id="storage">storage </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ubit/serial/" id="serial">serial </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ubit/messageBus/" id="messageBus">messageBus </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ubit/button/" id="buttons">buttons </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ubit/display/" id="display">display </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ubit/accelerometer/" id="accelerometer">accelerometer </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ubit/compass/" id="compass">compass </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ubit/thermometer/" id="thermometer">thermometer </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ubit/io/" id="io">io </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ubit/radio/" id="radio">radio </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="Data Types" onclick="showChildren('micro:bit - Mbed - C/C++Data Types')"> <i class="fa fa-plus-square" style="padding-left:5px;font-size:13px;"></i>  Data Types </a>
                <!--  -->
            </li>
            
            <div style="display:none" id="hidden_micro:bit - Mbed - C/C++Data Types">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../data-types/image/" id="MicroBitImage">MicroBitImage </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../data-types/event/" id="MicroBitEvent">MicroBitEvent </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../data-types/string/" id="ManagedString">ManagedString </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../data-types/packetbuffer/" id="PacketBuffer">PacketBuffer </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="Bluetooth" onclick="showChildren('micro:bit - Mbed - C/C++Bluetooth')"> <i class="fa fa-plus-square" style="padding-left:5px;font-size:13px;"></i>  Bluetooth </a>
                <!--  -->
            </li>
            
            <div style="display:none" id="hidden_micro:bit - Mbed - C/C++Bluetooth">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ble/profile/" id="Profile">Profile </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ble/accelerometer-service/" id="AccelerometerService">AccelerometerService </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ble/button-service/" id="ButtonService">ButtonService </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ble/dfu-service/" id="DFUService">DFUService </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ble/event-service/" id="EventService">EventService </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ble/iopin-service/" id="IOPinService">IOPinService </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ble/led-service/" id="LEDService">LEDService </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ble/magnetometer-service/" id="MagnetometerService">MagnetometerService </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ble/temperature-service/" id="TemperatureService">TemperatureService </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ble/uart-service/" id="UARTService">UARTService </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../ble/ble-connection-events/" id="Connection Events">Connection Events </a>
                </li>
            
            </div>
        
            <li class="current">
                <a style="padding-left:70px;" class="current"  id="Extras" onclick="showChildren('micro:bit - Mbed - C/C++Extras')"> <i class="fa fa-plus-square" style="padding-left:5px;font-size:13px;"></i>  Extras </a>
                <!--  -->
            </li>
            
            <div style="display:none" id="hidden_micro:bit - Mbed - C/C++Extras">
            
                <li class="current">
                    <a style="padding-left:90px;" class="current" href="./" id="MicroBitLightSensor">MicroBitLightSensor </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../spi/" id="SPI">SPI </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../ubit/blemanager/" id="_blemanager">  _blemanager </a>
                <!--  -->
            </li>
            
            <div style="display:none" id="hidden_micro:bit - Mbed - C/C++_blemanager">
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../ubit/multibutton/" id="_buttonAB">  _buttonAB </a>
                <!--  -->
            </li>
            
            <div style="display:none" id="hidden_micro:bit - Mbed - C/C++_buttonAB">
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../ubit/radioevent/" id="_radioevent">  _radioevent </a>
                <!--  -->
            </li>
            
            <div style="display:none" id="hidden_micro:bit - Mbed - C/C++_radioevent">
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../ubit/radiodatagram/" id="_radiodatagram">  _radiodatagram </a>
                <!--  -->
            </li>
            
            <div style="display:none" id="hidden_micro:bit - Mbed - C/C++_radiodatagram">
            
            </div>
        
        </div>
    
        <li class="">
            <a style="padding-left:50px;" class=""  id="micro:bit - Micropython" onclick="showChildren('micro:bit - Micropython')"> <i class="fa fa-plus-square" style="padding-left:5px;font-size:13px;"></i> micro:bit - Micropython</a>
        </li>
        
        <div style="display:none" id="hidden_micro:bit - Micropython">
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../../micropython/introduction/" id="Giới thiệu">  Giới thiệu </a>
                <!--  -->
            </li>
            
            <div style="display:none" id="hidden_micro:bit - MicropythonGiới thiệu">
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="Cơ bản" onclick="showChildren('micro:bit - MicropythonCơ bản')"> <i class="fa fa-plus-square" style="padding-left:5px;font-size:13px;"></i>  Cơ bản </a>
                <!--  -->
            </li>
            
            <div style="display:none" id="hidden_micro:bit - MicropythonCơ bản">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../../micropython/helloworld/" id="Hello World">Hello World </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../../micropython/images/" id="Ảnh">Ảnh </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="micro:bit micropython API" onclick="showChildren('micro:bit - Micropythonmicro:bit micropython API')"> <i class="fa fa-plus-square" style="padding-left:5px;font-size:13px;"></i>  micro:bit micropython API </a>
                <!--  -->
            </li>
            
            <div style="display:none" id="hidden_micro:bit - Micropythonmicro:bit micropython API">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../../micropython/api/" id="API">API </a>
                </li>
            
            </div>
        
        </div>
    
    <li class="paddingtop20"></li>
</ul>
<li>
          
            <li><ul class="subnav">
    <li class="">
        <a class="" href="../../../projects/projects/" id="Các dự án" style="font-size:95%;font-weight:bold;">Các dự án</a>
    </li>
    
    <li class="paddingtop20"></li>
</ul>
<li>
          
            <li><ul class="subnav">
    <li class="">
        <a class="" href="../../../license/" id="Bản quyền" style="font-size:95%;font-weight:bold;">Bản quyền</a>
    </li>
    
    <li class="paddingtop20"></li>
</ul>
<li>
          
            <li><ul class="subnav">
    <li class="">
        <a class="" href="../../../contributor/" id="Đóng góp" style="font-size:95%;font-weight:bold;">Đóng góp</a>
    </li>
    
    <li class="paddingtop20"></li>
</ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">Microbit Việt Nam</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
    <ul class="wy-breadcrumbs">
        <li><a href="../../..">Docs</a> &raquo;</li>
          
        <li>micro:bit - Mbed - C/C++ &raquo;</li>
          
        <li>Extras &raquo;</li>
           
        <li>MicroBitLightSensor</li>
        <li class="wy-breadcrumbs-aside">
             
                
            <a href="https://github.com/microbitvn/help.microbit.vn/tree/master/docs/lancaster-mbed/extras/light-sensing.md" class="icon icon-github"> Edit on GitHub</a>
                
             
        </li>
    </ul>
    <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="microbitlightsensor">MicroBitLightSensor<a class="headerlink" href="#microbitlightsensor" title="Permanent link">#</a></h1>
<h2 id="operation">Operation<a class="headerlink" href="#operation" title="Permanent link">#</a></h2>
<h3 id="sensing-pins">Sensing Pins<a class="headerlink" href="#sensing-pins" title="Permanent link">#</a></h3>
<p>If the current is inverted on an LED, it becomes sensitive to light. In particular
it is sensitive to the <strong>same colour</strong> of light it emits.</p>
<p>You will find that the Light Sensor on the micro:bit is more reactive to red light
than any other colour because that is the colour of light the display emits.</p>
<p>The display is architected with 3 rows, each with 9 columns. This is illustrated
below:</p>
<p><img alt="light-sensing info graphic" src="../../resources/light-sensing.png" /></p>
<p><center><em>Where the format is: <strong>ROW</strong>.<strong>COLUMN</strong></em></center></p>
<p>On the micro:bit we have 6 analog pins, 3 are applicable to the display and reside
on columns 1, 2 and 3.</p>
<p>This means that we have 9 pins in total that we can sense light on if we are
fast enough to transition between emitting and sensing light.</p>
<p>The 9 sense pins are illustrated below:</p>
<p><center></p>
<pre class="code"><code> _____________________________
| 1.1 |     | 1.2 |     | 1.3 |
|_____|_____|_____|_____|_____|
|     |     |     |     |     |
|_____|_____|_____|_____|_____|
| 2.2 |     | 2.3 |     | 2.1 |
|_____|_____|_____|_____|_____|
|     |     |     |     |     |
|_____|_____|_____|_____|_____|
| 3.3 |     | 3.1 |     | 3.2 |
|_____|_____|_____|_____|_____|</code></pre>


<p></center></p>
<p>The ADC takes around 4ms to settle and give accurate values with minimal current.
This places restrictions on our sensing window.</p>
<h3 id="interleaving">Interleaving<a class="headerlink" href="#interleaving" title="Permanent link">#</a></h3>
<p>In the current implementation, the display and the Light sensor can operate in an
interleaving manner. This interleaving is enabled due to a special display mode on the <a href="../../ubit/display/">display</a>
which is automatically activated when <code>readLightLevel</code> is called by the user.</p>
<p>This special mode (<code>DISPLAY_MODE_BLACK_AND_WHITE_LIGHT_SENSE</code>), increases the rate of the <code>systemTick</code> callback to 5ms, and the
<a href="../../ubit/display/">display</a> is thusly configured to drop the 4th frame for user processing,
which in this case, is entirely consumed by the light sensor. This reduces the display
refresh rate from 55Hz to around 50Hz.</p>
<p>To signify the window for user processing, the display will fire an event:</p>
<ul>
<li><em>ID</em>: <code>MICROBIT_ID_DISPLAY</code></li>
<li><em>Value</em>: <code>MICROBIT_DISPLAY_EVT_LIGHT_SENSE</code></li>
</ul>
<p>This will trigger an event handler in the <code>MicroBitLightSensor</code> class.</p>
<h2 id="sensing-life-cycle">Sensing Life Cycle<a class="headerlink" href="#sensing-life-cycle" title="Permanent link">#</a></h2>
<p>In the previous section we discussed how the <a href="../../ubit/display/">display</a> and the Light
Sensor interleave. This section will cover the actual operation of the sensor during
the <code>MICROBIT_DISPLAY_EVT_LIGHT_SENSE</code> event.</p>
<p><br/></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you would like to manually trigger the Light Sensor, a few steps must be taken:<br/><br/>
1) Disable the display so that the column pins are under the users&rsquo; control.<br/>
2) Construct an instance of <code>MicroBitLightSensor</code><br/>
3) Trigger the Light Sensor by firing a <code>MicroBitEvent</code> with the ID <code>MICROBIT_ID_DISPLAY</code> and the value <code>MICROBIT_DISPLAY_EVT_LIGHT_SENSE</code>.</p>
</div>
<h4 id="the-concept-of-channels">The Concept of Channels<a class="headerlink" href="#the-concept-of-channels" title="Permanent link">#</a></h4>
<p>As we previously discussed there are 9 pins we can sense light on. However, we face the problem
of interference from the state of other Columns.</p>
<p>We found that the best combination was to treat each of the three analog enabled Columns as a channel.
This leads our picture to look something more like this:</p>
<p><center></p>
<pre class="code"><code> _____________________________
|  1  |     |  2  |     |  3  |
|_____|_____|_____|_____|_____|
|     |     |     |     |     |
|_____|_____|_____|_____|_____|
|  2  |     |  3  |     |  1  |
|_____|_____|_____|_____|_____|
|     |     |     |     |     |
|_____|_____|_____|_____|_____|
|  3  |     |  1  |     |  2  |
|_____|_____|_____|_____|_____|</code></pre>


<p></center>
<center><em>Where each number represents a different column, now named a channel as it is a collection of 3 rows</em></center></p>
<p>This reduces the resolution of our light sensing capabilities as we can
now no longer can use 9 pins to sense light, purely due to the unfortunate fact
that we obtain interference from other pins that cannot be mitigated.</p>
<p>However, we do gain an accurate picture of the overall brightness detected by the display.</p>
<p>We expose a mean representation of the light level from the 3 channels on the display.</p>
<h4 id="the-algorithm">The Algorithm<a class="headerlink" href="#the-algorithm" title="Permanent link">#</a></h4>
<p><strong>Upon receiving an event:</strong></p>
<ul>
<li>Set all rows to be a DigitalOut, with a value of 0.</li>
<li>For the current channel:<ul>
<li>Set the current channel pin HI.</li>
<li>Immediately transition the current channel to be an AnalogIn</li>
</ul>
</li>
<li>Attach an interrupt to occur 4ms into the future. (This allows our AnalogIn instance
to settle correctly)</li>
</ul>
<p><strong>Upon interrupt:</strong></p>
<ul>
<li>Obtain our analog value.</li>
<li>Release the pin from GPIOTE control. (<em>If we do not do these, this column will not
be useable in the display driver</em>)</li>
<li>Move onto the next channel.</li>
</ul>
<p>After these two phases have occurred, the display will now once again be available
for regular usage until the next interleave is signaled by the display.</p>
<h2 id="message-bus-id">Message Bus ID<a class="headerlink" href="#message-bus-id" title="Permanent link">#</a></h2>
<h2 id="message-bus-events">Message Bus Events<a class="headerlink" href="#message-bus-events" title="Permanent link">#</a></h2>
<h1 id="api">API<a class="headerlink" href="#api" title="Permanent link">#</a></h1>
<h2 id="constructor">Constructor<a class="headerlink" href="#constructor" title="Permanent link">#</a></h2>
<p><br/></p>
<h4 id="microbitlightsensor-const-matrixmap-map">MicroBitLightSensor( <div style='color:#a71d5d; display:inline-block'>const  MatrixMap  &amp;</div> map)<a class="headerlink" href="#microbitlightsensor-const-matrixmap-map" title="Permanent link">#</a></h4>
<h5 id="description">Description<a class="headerlink" href="#description" title="Permanent link">#</a></h5>
<p>Constructor.  </p>
<p>Create a representation of the light sensor.  </p>
<p>map </p>
<p>The mapping information that relates pin inputs/outputs to physical screen coordinates. Defaults to microbitMatrixMap, defined in  MicroBitMatrixMaps.h .   </p>
<h5 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">#</a></h5>
<blockquote>
<p><div style='color:#a71d5d; display:inline-block'>const  MatrixMap  &amp;</div> map - The mapping information that relates pin inputs/outputs to physical screen coordinates. Defaults to microbitMatrixMap, defined in  MicroBitMatrixMaps.h . </p>
</blockquote>
<h2 id="read">read<a class="headerlink" href="#read" title="Permanent link">#</a></h2>
<p><br/></p>
<h4 id="int-read"><div style='color:#a71d5d; display:inline-block'>int</div> <div style='color:#795da3; display:inline-block'>read</div>()<a class="headerlink" href="#int-read" title="Permanent link">#</a></h4>
<h5 id="description_1">Description<a class="headerlink" href="#description_1" title="Permanent link">#</a></h5>
<p>This method returns a summed average of the three sections of the display.  </p>
<p>A section is defined as: <br />
 | 1 | | 2 | | 3 | <br />
<strong><em>    </em></strong>    <strong><em>    </em></strong>    ___     </p>
<p><strong><em>    </em></strong>    <strong><em>    </em></strong>    ___    </p>
<p>2         3         1    </p>
<p><strong><em>    </em></strong>    <strong><em>    </em></strong>    ___    </p>
<p><strong><em>    </em></strong>    <strong><em>    </em></strong>    ___    </p>
<p>3         1         2    </p>
<p><strong><em>    </em></strong>    <strong><em>    </em></strong>    ___    </p>
<p>Where each number represents a different section on the 5 x 5 matrix display.  </p>
<h5 id="returns">Returns<a class="headerlink" href="#returns" title="Permanent link">#</a></h5>
<p>returns a value in the range 0 - 255 where 0 is dark, and 255 is very bright </p>
<h2 id="startsensing">startSensing<a class="headerlink" href="#startsensing" title="Permanent link">#</a></h2>
<p><br/></p>
<h4 id="void-startsensing-microbitevent"><div style='color:#a71d5d; display:inline-block'>void</div> <div style='color:#795da3; display:inline-block'>startSensing</div>( <div style='color:#a71d5d; display:inline-block'>MicroBitEvent</div> )<a class="headerlink" href="#void-startsensing-microbitevent" title="Permanent link">#</a></h4>
<h5 id="description_2">Description<a class="headerlink" href="#description_2" title="Permanent link">#</a></h5>
<p>The method that is invoked by sending MICROBIT_DISPLAY_EVT_LIGHT_SENSE using the id MICROBIT_ID_DISPLAY.  </p>
<h5 id="parameters_1">Parameters<a class="headerlink" href="#parameters_1" title="Permanent link">#</a></h5>
<blockquote>
<p><div style='color:#a71d5d; display:inline-block'>MicroBitEvent</div> </p>
</blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>this can be manually driven by calling this member function, with a  MicroBitEvent  using the CREATE_ONLY option of the  MicroBitEvent  constructor. </p>
</div>
<hr />
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../spi/" class="btn btn-neutral float-right" title="SPI">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../ble/ble-connection-events/" class="btn btn-neutral" title="Connection Events"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2016 <a href="https://microbit.vn">Microbit Việt Nam</a></p>
    
  </div>

  
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<!-- <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/microbitvn/help.microbit.vn" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../../ble/ble-connection-events/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../spi/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div> -->

<script type="text/javascript">
  // If cookie is defined toggle the id
  if (typeof $.cookie('docToggle') !== 'undefined') {
      // Parse cookie which is an array
      var _parsed_cookie = JSON.parse($.cookie('docToggle'));
      // Loop over array and show hidden divs
      $.each(_parsed_cookie, function(index, value) {
          // Toggle
          $("[id='hidden_" + value + "']").css('display','');
      })
  }
</script>

</body>
</html>